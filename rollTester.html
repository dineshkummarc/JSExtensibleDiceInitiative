<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>JS Extensible Dice InitiativE (jeDIE) :: Tester</title>
    <script type="text/javascript" src="diceRoller.js"></script>
    <script type="text/javascript">

// JS Extensible Dice InitiativE (jeDIE)
// A string parser that extracts nd replaces dice rolls in text
// by Jay Crossler, Open Source CC-BY license - feel free to use/reuse/derive/make $, just give me credit!
// This is the test file to validate text works as desired

        var lastText = "";
    	function testThisText(clickedDiv) {
    		var formatType = document.getElementById('dicerolltypes').value || ";"
            var textToParse;
            if (clickedDiv && clickedDiv.innerHTML) {
                textToParse = clickedDiv.innerHTML;
                lastText=textToParse;
            } else {
                textToParse=lastText || "Nothing selected";
            }
            
            var returnedText = TextParsers.replaceDiceRolls(textToParse,formatType);
    		document.getElementById('resulttextarea').value = returnedText;            
            document.getElementById('resulttext').innerHTML = returnedText;
        }
    </script>
    <style>
	    body div#tests div {cursor: pointer; border:1px solid;}
	    body div#tests div:nth-child(odd) {background: #DCC}
	    body div#tests div:nth-child(even) {background: #CCF}
        #resulttext {border:  2px solid gold;}
        .holder {width: 48%;}
        .left {float: left;}
        .right {float: right;}
    </style>

    <!-- Styles to include to render dice rolls -->
    <style>
        .rollresponse {background-color: #caf;}
        .dieinput {font-style: italic; font-size: small;}
        .dieresult {font-weight: bold; border:1px solid blue;}
        .diesuccess {background-color: #4D4;}
        .diefailure {background-color: #d88}
    </style>
</head>
<body>
	<div>
		Text: <br/>
        <textarea id='resulttextarea' style='width:500px;height:50px;' onclick="this.style.height='250px';">Click a piece of text below to test the dice roller</textarea>
	</div>

    HTML: <div id='resulttext'>&nbsp;</div>

	<div id='options'>Styling of results:
        <select id='dicerolltypes' onchange="testThisText();">
          <option value="longhtml">longhtml</option>
          <option value="fullhtml">fullhtml</option>
          <option value="shorthtml">shorthtml</option>
          <option value="longtext">longtext</option>
          <option value="shorttext">shorttext</option>
          <option value="result">result</option>
        </select>
	</div>

	<br/>
	<div id='tests'>
      <div class='holder left'>
		<div onclick="testThisText(this);"><p style="color:red">Red Text: [5d8]</p>Done.</div>
		<div onclick="testThisText(this);">I /roll: 5w + 3w!. [ 2w+4w+2w ]</div>
		<div onclick="testThisText(this);">Bau rolls to cast his Occulus Repairo spell, [5WRote]</div>
		<div onclick="testThisText(this);">[5W] => 5 d10, apply 10Again rule. <br/>
[5w!] => 5 d10, apply 9 again rule <br/>
[5w!!] => 5d10, apply 8 again rule</div>
		<div onclick="testThisText(this);"><b>[5wRote!]</b> should be bolded</div>
		<div onclick="testThisText(this);">[5w!!Rote]</div>
		<div onclick="testThisText(this);">I roll a [7w], You roll [6w!r] or [6wr!] or [6wRote] then /roll 5w!! </div>
		<div onclick="testThisText(this);">I roll a [7s7r], You roll [6w!!] then /roll 5s7!!</div>
		<div onclick="testThisText(this);">[5w]</div>
		<div onclick="testThisText(this);">[7W10] or [10W5]</div>
		<div onclick="testThisText(this);">[4wr!]</div>
		<div onclick="testThisText(this);">[5w!rote]</div>
		<div onclick="testThisText(this);">[5w!!rote]</div>
		<div onclick="testThisText(this);">[4wRote!!!]</div>
		<div onclick="testThisText(this);">5 weiner dogs rote w! In 3d!</div>
		<div onclick="testThisText(this);">/roll 5w</div>
		<div onclick="testThisText(this);">It's /roll [3W!]</div>
		<div onclick="testThisText(this);">5wins!</div>
	  </div>
      <div class='holder right'>
		<div onclick="testThisText(this);">I roll a [3 d20+2]</div>
		<div onclick="testThisText(this);">I roll a 1d20+2</div>
		<div onclick="testThisText(this);">[ 1d20	+7 	]</div>
		<div onclick="testThisText(this);">1d20+12</div>
		<div onclick="testThisText(this);">I roll a [1d20+2d8]</div>
		<div onclick="testThisText(this);">I roll a [1d20 + 2d8], [You win]!</div>
		<div onclick="testThisText(this);">[2d6!]! - I roll a 1d20+2, You roll 7d10, right? or (10d10)</div>
		<div onclick="testThisText(this);">I roll a [1d20-7+1d8]</div>
      </div>
	</div>
</body>
</html>
